<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Marketing Study Portal</title>
<meta name="description" content="Learn digital marketing topics in English and Tamil with interactive quizzes and chatbot support." />
<style>
  :root {
    --color-bg-light: #fafafa;
    --color-text-light: #121212;
    --color-bg-dark: #121212;
    --color-text-dark: #e0e0e0;
    --color-primary-light: #007acc;
    --color-primary-dark: #80cbc4;
    --color-card-bg-light: #fff;
    --color-card-bg-dark: #1e1e1e;
    --color-border-light: #ccc;
    --color-border-dark: #444;
    --transition-speed: 0.3s;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    background-color: var(--color-bg-light);
    color: var(--color-text-light);
    transition: background-color var(--transition-speed), color var(--transition-speed);
  }
  body.dark {
    background-color: var(--color-bg-dark);
    color: var(--color-text-dark);
  }
  header {
    padding: 1rem 1rem;
    background-color: var(--color-card-bg-light);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background-color var(--transition-speed);
  }
  body.dark header {
    background-color: var(--color-card-bg-dark);
    box-shadow: 0 2px 10px rgba(255,255,255,0.1);
  }
  h1 {
    margin: 0;
    font-size: 1.5rem;
  }
  nav {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }
  nav button {
    background: none;
    border: none;
    color: var(--color-primary-light);
    font-weight: 600;
    cursor: pointer;
    padding: 0.3rem 0.5rem;
    border-radius: 4px;
    transition: background-color 0.2s ease;
  }
  body.dark nav button {
    color: var(--color-primary-dark);
  }
  nav button:hover, nav button.active {
    background-color: var(--color-primary-light);
    color: white;
  }
  body.dark nav button:hover, body.dark nav button.active {
    background-color: var(--color-primary-dark);
    color: #121212;
  }
  main {
    max-width: 800px;
    margin: 1rem auto 5rem auto;
    padding: 0 1rem;
  }
  .module-card {
    background-color: var(--color-card-bg-light);
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    margin-bottom: 1.5rem;
    padding: 1rem;
    cursor: pointer;
    transition: background-color var(--transition-speed), box-shadow var(--transition-speed);
  }
  body.dark .module-card {
    background-color: var(--color-card-bg-dark);
    box-shadow: 0 0 10px rgba(255,255,255,0.1);
  }
  .module-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
  }
  .module-header h2 {
    margin: 0;
    font-size: 1.25rem;
  }
  .expand-icon {
    font-weight: bold;
    font-size: 1.5rem;
    transition: transform var(--transition-speed);
  }
  .expand-icon.expanded {
    transform: rotate(45deg);
  }
  .module-content {
    margin-top: 1rem;
    line-height: 1.5;
  }
  .source-link {
    display: inline-block;
    margin-top: 0.8rem;
    color: var(--color-primary-light);
    text-decoration: none;
    font-weight: 600;
  }
  body.dark .source-link {
    color: var(--color-primary-dark);
  }
  .quiz-section {
    margin-top: 1rem;
    border-top: 1px solid var(--color-border-light);
    padding-top: 1rem;
  }
  body.dark .quiz-section {
    border-color: var(--color-border-dark);
  }
  .quiz-options {
    list-style: none;
    padding: 0;
    margin: 0.5rem 0 1rem 0;
  }
  .quiz-options li {
    margin-bottom: 0.5rem;
  }
  label {
    cursor: pointer;
  }
  input[type="radio"] {
    margin-right: 0.6rem;
    cursor: pointer;
  }
  button.submit-btn {
    background-color: var(--color-primary-light);
    border: none;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.2s ease;
  }
  body.dark button.submit-btn {
    background-color: var(--color-primary-dark);
    color: #121212;
  }
  button.submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .quiz-result {
    font-weight: bold;
    margin-top: 0.5rem;
  }
  .quiz-result.correct {
    color: #4caf50;
  }
  .quiz-result.incorrect {
    color: #e53935;
  }
  /* Chatbot styles */
  #chatbot {
    position: fixed;
    bottom: 15px;
    right: 15px;
    width: 320px;
    max-height: 400px;
    background-color: var(--color-card-bg-light);
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    font-size: 14px;
    color: var(--color-text-light);
    transition: background-color var(--transition-speed), color var(--transition-speed);
    overflow: hidden;
  }
  body.dark #chatbot {
    background-color: var(--color-card-bg-dark);
    box-shadow: 0 0 15px rgba(255,255,255,0.2);
    color: var(--color-text-dark);
  }
  #chatbot .messages {
    flex-grow: 1;
    overflow-y: auto;
    padding: 10px;
  }
  #chatbot .message {
    margin-bottom: 8px;
    max-width: 80%;
    word-wrap: break-word;
    padding: 6px 12px;
    border-radius: 12px;
    display: inline-block;
  }
  #chatbot .message.user {
    background-color: var(--color-primary-light);
    color: white;
    margin-left: auto;
  }
  body.dark #chatbot .message.user {
    background-color: var(--color-primary-dark);
    color: #121212;
  }
  #chatbot .message.bot {
    background-color: var(--color-border-light);
    color: var(--color-text-light);
  }
  body.dark #chatbot .message.bot {
    background-color: var(--color-border-dark);
    color: var(--color-text-dark);
  }
  #chatbot .input-area {
    display: flex;
    border-top: 1px solid var(--color-border-light);
  }
  body.dark #chatbot .input-area {
    border-color: var(--color-border-dark);
  }
  #chatbot input[type="text"] {
    flex-grow: 1;
    padding: 8px;
    border: none;
    outline: none;
    font-size: 14px;
    background-color: transparent;
    color: inherit;
  }
  #chatbot button.send-btn {
    background-color: var(--color-primary-light);
    border: none;
    color: white;
    padding: 0 15px;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }
  body.dark #chatbot button.send-btn {
    background-color: var(--color-primary-dark);
    color: #121212;
  }
  #chatbot button.send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  /* Responsive */
  @media (max-width: 480px) {
    #chatbot {
      width: 90vw;
      right: 5vw;
    }
    nav {
      justify-content: center;
    }
  }
</style>
</head>
<body>
<header>
  <h1>Digital Marketing Study Portal</h1>
  <button id="darkModeToggle" aria-label="Toggle dark mode">Switch to Dark Mode</button>
</header>
<nav aria-label="Main navigation" id="navButtons">
  <!-- Buttons added by JS -->
</nav>
<main id="mainContent" tabindex="-1">
  <section id="homePage">
    <h2>Welcome to Digital Marketing Study Portal</h2>
    <p>Select a topic above to start learning with bilingual content, quizzes, and AI assistance.</p>
  </section>
  <section id="modulePage" hidden>
    <!-- Module content rendered here -->
  </section>
</main>

<!-- Chatbot -->
<div id="chatbot" aria-label="Chatbot Support" role="region" aria-live="polite">
  <div class="messages" id="chatMessages" aria-live="polite" aria-relevant="additions"></div>
  <div class="input-area">
    <input
      type="text"
      id="chatInput"
      aria-label="Chat input"
      placeholder="Ask a question..."
      autocomplete="off"
    />
    <button id="sendChat" class="send-btn" aria-label="Send chat message" disabled>Send</button>
  </div>
</div>

<script>
  // Data for modules (add more modules as needed)
  const modulesData = [
    {
      id: "seo",
      title: "Search Engine Optimization (SEO) / தேடுபொறி மேம்பாடு",
      description_en:
        "SEO involves optimizing your website to rank higher on search engines like Google, improving organic traffic.",
      description_ta:
        "SEO என்பது உங்கள் வலைத்தளத்தை கூகுள் போன்ற தேடுபொறிகளில் மேலிட அதிகரிக்க சிறந்த முறையில் மேம்படுத்துவது ஆகும்.",
      source: "https://moz.com/learn/seo/what-is-seo",
      quiz: {
        question: "What does SEO primarily aim to improve?",
        options: [
          "Paid advertising reach",
          "Organic search ranking",
          "Email open rates",
          "Social media followers",
        ],
        answer: 1,
      },
    },
    {
      id: "social-media",
      title: "Social Media Marketing / சமூக ஊடக சந்தைப்படுத்தல்",
      description_en:
        "Using platforms like Facebook, Instagram, and Twitter to promote brands and engage customers.",
      description_ta:
        "பேஸ்புக், இன்ஸ்டாகிராம், ட்விட்டர் போன்ற தளங்களை பயன்படுத்தி பிராண்டுகளை விளம்பரப்படுத்துதல் மற்றும் வாடிக்கையாளர்களை ஈர்த்தல்.",
      source: "https://sproutsocial.com/insights/social-media-marketing/",
      quiz: {
        question: "Which platform is best known for professional networking?",
        options: ["Instagram", "LinkedIn", "Snapchat", "Pinterest"],
        answer: 1,
      },
    },
    {
      id: "google-ads",
      title: "Google Ads / கூகுள் விளம்பரங்கள்",
      description_en:
        "Google Ads allows you to create online ads to reach audiences interested in your products and services.",
      description_ta:
        "கூகுள் விளம்பரங்கள் உங்கள் தயாரிப்புகள் மற்றும் சேவைகளில் ஆர்வமுள்ள மக்களை அடைய இணைய விளம்பரங்களை உருவாக்க உதவுகிறது.",
      source: "https://ads.google.com/home/",
      quiz: {
        question: "What type of advertising platform is Google Ads?",
        options: [
          "Organic search platform",
          "Pay-per-click advertising",
          "Social media network",
          "Email marketing tool",
        ],
        answer: 1,
      },
    },
    // You can add more modules here
  ];

  // References to DOM elements
  const navButtonsContainer = document.getElementById("navButtons");
  const mainContent = document.getElementById("mainContent");
  const homePage = document.getElementById("homePage");
  const modulePage = document.getElementById("modulePage");
  const darkModeToggle = document.getElementById("darkModeToggle");

  // Chatbot references
  const chatMessages = document.getElementById("chatMessages");
  const chatInput = document.getElementById("chatInput");
  const sendChatBtn = document.getElementById("sendChat");

  // State
  let currentModuleId = null;
  let darkMode = false;

  // Initialize nav buttons
  function initNav() {
    // Clear any existing buttons
    navButtonsContainer.innerHTML = "";

    // Home button
    const homeBtn = document.createElement("button");
    homeBtn.textContent = "Home";
    homeBtn.classList.add("active");
    homeBtn.addEventListener("click", () => loadHome());
    navButtonsContainer.appendChild(homeBtn);

    // Module buttons
    modulesData.forEach((mod) => {
      const btn = document.createElement("button");
      btn.textContent = mod.title.split("/")[0].trim();
      btn.setAttribute("data-id", mod.id);
      btn.addEventListener("click", () => loadModule(mod.id));
      navButtonsContainer.appendChild(btn);
    });
  }

  // Highlight active nav button
  function highlightNavButton(id) {
    [...navButtonsContainer.children].forEach((btn) => {
      if ((btn.getAttribute("data-id") || "home") === id) {
        btn.classList.add("active");
      } else {
        btn.classList.remove("active");
      }
    });
  }

  // Load home page
  function loadHome() {
    currentModuleId = null;
    homePage.hidden = false;
    modulePage.hidden = true;
    highlightNavButton("home");
    document.title = "Digital Marketing Study Portal";
    mainContent.focus();
    history.pushState({ page: "home" }, "", "#");
  }

  // Create module card HTML
  function createModuleCard(mod) {
    const card = document.createElement("article");
    card.className = "module-card";
    card.setAttribute("tabindex", "0");
    card.setAttribute("aria-expanded", "false");
    card.setAttribute("role", "region");
    card.setAttribute("aria-label", mod.title);

    // Header
    const header = document.createElement("div");
    header.className = "module-header";

    const title = document.createElement("h2");
    title.textContent = mod.title;
    header.appendChild(title);

    const expandIcon = document.createElement("span");
    expandIcon.className = "expand-icon";
    expandIcon.textContent = "+";
    header.appendChild(expandIcon);

    card.appendChild(header);

    // Content
    const content = document.createElement("div");
    content.className = "module-content";
    content.style.display = "none";

    const descEn = document.createElement("p");
    descEn.innerHTML = `<strong>English:</strong> ${mod.description_en}`;
    content.appendChild(descEn);

    const descTa = document.createElement("p");
    descTa.innerHTML = `<strong>தமிழ்:</strong> ${mod.description_ta}`;
    content.appendChild(descTa);

    if (mod.source) {
      const sourceLink = document.createElement("a");
      sourceLink.href = mod.source;
      sourceLink.target = "_blank";
      sourceLink.rel = "noopener noreferrer";
      sourceLink.className = "source-link";
      sourceLink.textContent = "Source »";
      content.appendChild(sourceLink);
    }

    // Quiz
    if (mod.quiz) {
      const quizSection = document.createElement("section");
      quizSection.className = "quiz-section";
      quizSection.setAttribute("aria-label", "Quiz Section");

      const q = document.createElement("p");
      q.innerHTML = `<strong>Quiz:</strong> ${mod.quiz.question}`;
      quizSection.appendChild(q);

      const ul = document.createElement("ul");
      ul.className = "quiz-options";

      mod.quiz.options.forEach((opt, i) => {
        const li = document.createElement("li");
        const label = document.createElement("label");

        const input = document.createElement("input");
        input.type = "radio";
        input.name = `quiz-${mod.id}`;
        input.value = i;
        input.setAttribute("aria-checked", "false");

        label.appendChild(input);
        label.appendChild(document.createTextNode(opt));

        li.appendChild(label);
        ul.appendChild(li);
      });

      quizSection.appendChild(ul);

      const submitBtn = document.createElement("button");
      submitBtn.className = "submit-btn";
      submitBtn.textContent = "Submit Answer";
      submitBtn.disabled = true;

      quizSection.appendChild(submitBtn);

      const resultMsg = document.createElement("p");
      resultMsg.className = "quiz-result";
      quizSection.appendChild(resultMsg);

      // Quiz logic
      let selectedAnswer = null;

      ul.addEventListener("change", (e) => {
        if (e.target && e.target.name === `quiz-${mod.id}`) {
          selectedAnswer = Number(e.target.value);
          submitBtn.disabled = false;
          resultMsg.textContent = "";
          resultMsg.className = "quiz-result";
        }
      });

      submitBtn.addEventListener("click", () => {
        if (selectedAnswer === null) return;

        if (selectedAnswer === mod.quiz.answer) {
          resultMsg.textContent = "Correct! Well done.";
          resultMsg.classList.add("correct");
        } else {
          resultMsg.textContent = `Incorrect. Correct answer: "${mod.quiz.options[mod.quiz.answer]}".`;
          resultMsg.classList.add("incorrect");
        }
        submitBtn.disabled = true;

        // Disable all options